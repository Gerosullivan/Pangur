{
  "title": "Pangur Ban Tutorial",
  "version": 1,
  "steps": [
    {
      "id": "board-overview",
      "order": 1,
      "title": "Board",
      "highlights": [".board-wrapper"],
      "text": "This is the barn: a 5x5 grid where the entire fight takes place.",
      "instruction": "Select Next to continue.",
      "showNext": true,
      "lockBoard": true
    },
    {
      "id": "incoming-lane",
      "order": 2,
      "title": "Incoming Mice",
      "highlights": ["incoming-lane"],
      "text": "Mice in the queue wait outside until both cat and mouse turns resolve.",
      "instruction": "Select Next to continue.",
      "showNext": true,
      "lockBoard": true
    },
    {
      "id": "cell-occupancy",
      "order": 3,
      "title": "Cell Basics",
      "highlights": ["board-all-cells"],
      "text": "Cats and mice can be placed on the board, but only one piece fits on any cell.",
      "instruction": "Select Next to continue.",
      "showNext": true,
      "lockBoard": true
    },
    {
      "id": "gate-cells",
      "order": 4,
      "title": "Entrance Squares",
      "highlights": ["B5", "C5", "D5"],
      "text": "Entrance cells are where incoming mice try to enter the barn.",
      "instruction": "Select Next to continue.",
      "showNext": true,
      "lockBoard": true
    },
    {
      "id": "shadow-cells",
      "order": 5,
      "title": "Shadow Squares",
      "highlights": ["shadow-cells"],
      "text": "Shadow tiles boost both sides: cats can prime Shadow Strike, and mice that feed here grow stronger.",
      "instruction": "Select Next to continue.",
      "showNext": true,
      "lockBoard": true
    },
    {
      "id": "resident-mice",
      "order": 6,
      "title": "Resident Mice",
      "highlights": ["resident-mice"],
      "text": "Several mice already occupy the barn. We need to clear them out.",
      "instruction": "Select Next to continue.",
      "showNext": true,
      "lockBoard": true
    },
    {
      "id": "cats-hand",
      "order": 7,
      "title": "Cats Ready",
      "highlights": ["cats-staging"],
      "text": "Your cats are waiting off-board. Place them to begin the defense.",
      "instruction": "Select Next to place them to begin the defense.",
      "showNext": true,
      "lockBoard": true
    },
    {
      "id": "place-pangur",
      "order": 8,
      "title": "Place Pangur",
      "highlights": ["pangur", "C4"],
      "text": "Bring Pangur onto the barn.",
      "instruction": "Drag Pangur to the highlighted cell.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-place",
          "actorId": "pangur",
          "to": "C4"
        }
      ]
    },
    {
      "id": "pangur-gate",
      "order": 9,
      "title": "Test Meow at Entrance",
      "highlights": ["pangur", "C5"],
      "text": "Move Pangur to an entrance. His meow can deter incoming mice; filling all entrances with cats scares an entire wave.",
      "instruction": "Drag Pangur to the entrance.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-place",
          "actorId": "pangur",
          "to": "C5"
        }
      ]
    },
    {
      "id": "pangur-return",
      "order": 10,
      "title": "Reset Pangur",
      "highlights": ["pangur", "C4"],
      "text": "Oh look! One incoming mouse is deterred due to Pangur's Meow attribute.",
      "instruction": "Drag Pangur back to the highlighted cell to continue setup.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-place",
          "actorId": "pangur",
          "from": "C5",
          "to": "C4"
        }
      ]
    },
    {
      "id": "place-baircne",
      "order": 11,
      "title": "Place Baircne",
      "highlights": ["baircne", "B2"],
      "text": "Bring Baircne into the barn.",
      "instruction": "Drag Baircne to the highlighted cell.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-place",
          "actorId": "baircne",
          "to": "B2"
        }
      ]
    },
    {
      "id": "place-guardian",
      "order": 12,
      "title": "Place Guardian",
      "highlights": ["guardian", "B3"],
      "text": "Place the Guardian cat on the board.",
      "instruction": "Drag Guardian to the highlighted cell.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-place",
          "actorId": "guardian",
          "to": "B3"
        }
      ]
    },
    {
      "id": "confirm-formation",
      "order": 13,
      "title": "Confirm Formation",
      "highlights": ["button:Confirm Formation"],
      "text": "In a real game you can rearrange freely until ready, then lock in your formation.",
      "instruction": "Select Confirm Formation.",
      "showNext": false,
      "completeOn": [
        {
          "action": "confirm-formation"
        }
      ]
    },
    {
      "id": "selection-basics",
      "order": 14,
      "title": "Selecting Cats",
      "highlights": [],
      "text": "Selecting a cat highlights green move targets and red attack targets. Cats move any distance in straight lines\u2014horizontal, vertical, or diagonal\u2014until blocked.",
      "instruction": "Select Next to continue.",
      "showNext": true,
      "lockBoard": true
    },
    {
      "id": "turn-sequence",
      "order": 15,
      "title": "Turn Order",
      "highlights": [".top-bar-metric"],
      "text": "Cats act first, then resident mice, then incoming mice enter from the entrance squares.",
      "instruction": "Select Next to continue.",
      "showNext": true,
      "lockBoard": true
    },
    {
      "id": "pangur-clears-gate-mouse",
      "order": 16,
      "title": "Attack the Entrance Mouse",
      "highlights": ["pangur", "mouse-6", "B5"],
      "text": "Spend one of Pangur's three catch to remove the entrance mouse.",
      "instruction": "Make sure Pangur is selected, then select the mouse to attack.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-attack",
          "actorId": "pangur",
          "targetId": "mouse-6"
        }
      ]
    },
    {
      "id": "pangur-clears-b4",
      "order": 17,
      "title": "Sweep the Shadow Mouse",
      "highlights": ["pangur", "mouse-5", "B4"],
      "text": "Use another of Pangur's catch points to clear the shadow mouse. Notice how Pangur's attack value is reduced.",
      "instruction": "Attack the shadow mouse.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-attack",
          "actorId": "pangur",
          "targetId": "mouse-5"
        }
      ]
    },
    {
      "id": "baircne-strike-1",
      "order": 18,
      "title": "Meow Shields from Retaliation",
      "highlights": ["baircne", "mouse-3", "A3"],
      "text": "Grain fed mice retaliate when attacked. Meow (blue number) reduces retaliation damage: the 3/3 mouse deals 3 damage, but Baircne's 2 meow shields against 2, so Baircne only takes 1 damage.",
      "instruction": "Attack the 3/3 mouse once with the 2/2 cat.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-attack",
          "actorId": "baircne",
          "targetId": "mouse-3",
          "count": 1
        }
      ]
    },
    {
      "id": "baircne-strike-2",
      "order": 19,
      "title": "Chip Again",
      "highlights": ["baircne", "mouse-3", "A3"],
      "text": "Spend another catch to drop the mouse to 1 heart. Notice: the cat has no more attack points left.",
      "instruction": "Attack the 3/3 mouse again.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-attack",
          "actorId": "baircne",
          "targetId": "mouse-3",
          "count": 2
        }
      ]
    },
    {
      "id": "guardian-finisher",
      "order": 20,
      "title": "Finish the Big Mouse",
      "highlights": ["guardian", "mouse-3", "A3"],
      "text": "Finish the wounded mouse; killing heals the cat by 1.",
      "instruction": "Deliver the killing blow with the 1/3 cat.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-attack",
          "actorId": "guardian",
          "targetId": "mouse-3"
        }
      ]
    },
    {
      "id": "guardian-to-gate",
      "order": 21,
      "title": "Stack Meow at the Entrance",
      "highlights": ["guardian", "B5"],
      "text": "Move Guardian onto the entrance to add meow and deter the next wave.",
      "instruction": "Move Guardian to the entrance.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-move",
          "actorId": "guardian",
          "to": "B5"
        }
      ]
    },
    {
      "id": "pangur-reposition-c2",
      "order": 22,
      "title": "Position Pangur for Baircne",
      "highlights": ["pangur", "C2", "baircne"],
      "text": "Move Pangur adjacent to Baircne so his shield passive boosts Baircne's catch.",
      "instruction": "Move Pangur to the highlighted cell.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-move",
          "actorId": "pangur",
          "to": "C2"
        }
      ]
    },
    {
      "id": "baircne-clears-c1",
      "order": 23,
      "title": "Clean Up the Corner Mouse",
      "highlights": ["baircne", "mouse-1", "C1"],
      "text": "Use the boosted catch to finish the corner mouse.",
      "instruction": "Attack the corner mouse.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-attack",
          "actorId": "baircne",
          "targetId": "mouse-1"
        }
      ]
    },
    {
      "id": "baircne-shadow-parking",
      "order": 24,
      "title": "Park on Shadow",
      "highlights": ["baircne", "E5"],
      "text": "Move Baircne onto a shadow tile to prime Shadow Strike for next turn.",
      "instruction": "Move Baircne to the highlighted shadow cell.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-move",
          "actorId": "baircne",
          "to": "E5"
        }
      ]
    },
    {
      "id": "pangur-double-move",
      "order": 25,
      "title": "Show Pangur's Double Move",
      "highlights": ["pangur", "E2"],
      "text": "Pangur can move twice per turn. Reposition him toward the remaining threats.",
      "instruction": "Move Pangur to the highlighted cell.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-move",
          "actorId": "pangur",
          "to": "E2"
        }
      ]
    },
    {
      "id": "pangur-stun-e1",
      "order": 26,
      "title": "Stun the Strong Mouse",
      "highlights": ["pangur", "mouse-2", "E1"],
      "text": "Attack the 2/2 mouse to stun it; stunned mice cannot grow this turn.",
      "instruction": "Attack the 2/2 mouse.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-attack",
          "actorId": "pangur",
          "targetId": "mouse-2",
          "count": 1
        }
      ]
    },
    {
      "id": "end-cat-phase",
      "order": 27,
      "title": "Cats End Turn",
      "highlights": ["button:End Turn"],
      "text": "Once all cats have acted, end the cat phase. Next, mice take their turn: they move or attack first, then feed (shadow mice grow), then new mice enter.",
      "instruction": "Select End Turn.",
      "showNext": false,
      "completeOn": [
        {
          "action": "end-cat-phase",
          "count": 1
        }
      ]
    },
    {
      "id": "mouse-attacks",
      "order": 28,
      "title": "Mouse Retaliation",
      "highlights": ["mouse-4", "pangur"],
      "text": "During the mouse turn, adjacent mice attack instead of moving. Pangur takes two hits from the 3/3 mouse.",
      "instruction": "Advance the Next button to resolve the attacks.",
      "showNext": false,
      "completeOn": [
        {
          "action": "mouse-attack",
          "targetId": "pangur",
          "count": 2
        }
      ]
    },
    {
      "id": "mouse-feed-upgrade",
      "order": 29,
      "title": "Mice Feed and Grow",
      "highlights": ["mouse-7", "mouse-4", "shadow-cells"],
      "text": "Feeding increases grain loss and upgrades (non-stunned) mice on shadow tiles. Shadow placement matters for their growth. Note: the 3/3 mouse will grow to 4/4.",
      "instruction": "Advance to finish feeding.",
      "showNext": false,
      "completeOn": [
        {
          "action": "mouse-feed",
          "count": 1
        }
      ]
    },
    {
      "id": "incoming-summary",
      "order": 30,
      "title": "Incoming Wave Preview",
      "highlights": ["incoming-lane"],
      "text": "Meow from entrance cats scares part of the wave. Scared mice leave the queue; the rest will try to enter.",
      "instruction": "Advance the Next button stepper.",
      "showNext": false,
      "completeOn": [
        {
          "action": "incoming-summary",
          "count": 1
        }
      ]
    },
    {
      "id": "incoming-placement",
      "order": 31,
      "title": "Incoming Placement",
      "highlights": ["gate-line"],
      "text": "Entering mice append to existing mouse lines if paths are open. Entrance cats block entry on their cells.",
      "instruction": "Advance to place incoming mice.",
      "showNext": false,
      "completeOn": [
        {
          "action": "incoming-place",
          "count": 3
        },
        {
          "action": "incoming-finish",
          "count": 1
        }
      ]
    },
    {
      "id": "next-cat-turn",
      "order": 32,
      "title": "Next Cat Turn",
      "highlights": ["cats-on-board"],
      "text": "Once placement finishes, the next cat turn begins.",
      "instruction": "Select Next to continue.",
      "showNext": true,
      "lockBoard": true,
      "completeOn": [
        {
          "action": "incoming-finish",
          "count": 1
        }
      ]
    },
    {
      "id": "turn2-baircne-picks-off",
      "title": "Pick Off Entrance Mice",
      "highlights": ["baircne", "mouse-7", "D5"],
      "text": "Use Baircne to remove the entrance threat.",
      "instruction": "Attack the entrance mouse.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-attack",
          "actorId": "baircne",
          "targetId": "mouse-7"
        }
      ],
      "order": 33
    },
    {
      "id": "turn2-baircne-move-e4",
      "title": "Reposition Baircne",
      "highlights": ["baircne", "E4"],
      "text": "Reposition Baircne toward the shadow line.",
      "instruction": "Move Baircne to the highlighted cell.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-move",
          "actorId": "baircne",
          "to": "E4"
        }
      ],
      "order": 34
    },
    {
      "id": "turn2-chip-boss-baircne",
      "title": "Chip the 4/4 Mouse",
      "highlights": ["baircne", "mouse-4", "E3"],
      "text": "Open with Baircne to safely chip the upgraded mouse on the shadow tile.",
      "instruction": "Attack the 4/4 mouse twice with Baircne.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-attack",
          "actorId": "baircne",
          "targetId": "mouse-4",
          "count": 2
        }
      ],
      "order": 35
    },
    {
      "id": "turn2-chip-boss-pangur",
      "title": "Finish the 4/4 Mouse",
      "highlights": ["pangur", "mouse-4", "E3"],
      "text": "Let Pangur finish the weakened mouse.",
      "instruction": "Attack the same mouse twice with Pangur.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-attack",
          "actorId": "pangur",
          "targetId": "mouse-4",
          "count": 2
        }
      ],
      "order": 36
    },
    {
      "id": "turn2-cleanup-attack",
      "title": "Finish the Corner Mouse",
      "highlights": ["pangur", "mouse-2", "E1"],
      "text": "Clear the remaining 2/2 mouse.",
      "instruction": "Attack the 2/2 mouse with Pangur.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-attack",
          "actorId": "pangur",
          "targetId": "mouse-2",
          "count": 3
        }
      ],
      "order": 37
    },
    {
      "id": "turn2-cleanup-move",
      "title": "Reposition Pangur",
      "highlights": ["pangur", "A2"],
      "text": "Reposition Pangur across the board for future turns.",
      "instruction": "Move Pangur to the highlighted cell.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-move",
          "actorId": "pangur",
          "to": "A2"
        }
      ],
      "order": 38
    },
    {
      "id": "turn2-guardian-finish",
      "order": 39,
      "title": "Guardian Cleanup",
      "highlights": ["guardian", "mouse-10", "B4"],
      "text": "Guardian removes the last resident from this wave.",
      "instruction": "Attack the remaining mouse.",
      "showNext": true,
      "completeOn": [
        {
          "action": "cat-attack",
          "actorId": "guardian",
          "targetId": "mouse-10"
        }
      ]
    },
    {
      "id": "turn2-end-and-mice",
      "order": 40,
      "title": "End Turn, Resolve Mice",
      "highlights": ["button:End Turn"],
      "text": "Finish the cat phase; incoming placements repeat.",
      "instruction": "Advance through mouse feeding and incoming placement.",
      "showNext": false,
      "completeOn": [
        {
          "action": "end-cat-phase",
          "count": 2
        },
        {
          "action": "incoming-finish",
          "count": 2
        }
      ]
    },
    {
      "id": "turn3-guardian-clears-c4",
      "title": "Guard the Line",
      "highlights": ["guardian", "mouse-9", "C4"],
      "text": "Guardian tidies the lane. Clearing this mouse keeps the path open.",
      "instruction": "Attack the mouse on C4 with Guardian.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-attack",
          "actorId": "guardian",
          "targetId": "mouse-9"
        }
      ],
      "order": 41
    },
    {
      "id": "turn3-pangur-center",
      "title": "Center Pangur",
      "highlights": ["pangur", "C4"],
      "text": "Center Pangur so he can pivot to any entrance next wave.",
      "instruction": "Move Pangur to the highlighted cell.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-move",
          "actorId": "pangur",
          "to": "C4"
        }
      ],
      "order": 42
    },
    {
      "id": "turn3-baircne-clears-e5",
      "title": "Shadow Cleanup",
      "highlights": ["baircne", "mouse-12", "E5"],
      "text": "Use Baircne to remove the shadow mouse before it grows.",
      "instruction": "Attack the mouse on E5.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-attack",
          "actorId": "baircne",
          "targetId": "mouse-12"
        }
      ],
      "order": 43
    },
    {
      "id": "turn3-baircne-clears-d5",
      "title": "Entrance Relief",
      "highlights": ["baircne", "mouse-11", "D5"],
      "text": "Clear the second entrance mouse to free the entrance.",
      "instruction": "Attack the mouse on D5.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-attack",
          "actorId": "baircne",
          "targetId": "mouse-11"
        }
      ],
      "order": 44
    },
    {
      "id": "turn3-baircne-move-d5",
      "title": "Hold the Entrance",
      "highlights": ["baircne", "D5"],
      "text": "Park Baircne on the entrance to stack meow.",
      "instruction": "Move Baircne to the highlighted cell.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-move",
          "actorId": "baircne",
          "to": "D5"
        }
      ],
      "order": 45
    },
    {
      "id": "turn3-pangur-clears-b4",
      "title": "Finish the Straggler",
      "highlights": ["pangur", "mouse-13", "B4"],
      "text": "Clean up the remaining mouse on the left lane.",
      "instruction": "Attack the mouse on B4 with Pangur.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-attack",
          "actorId": "pangur",
          "targetId": "mouse-13"
        }
      ],
      "order": 46
    },
    {
      "id": "turn3-pangur-clears-c5",
      "title": "Secure the Entrance",
      "highlights": ["pangur", "mouse-8", "C5"],
      "text": "Secure the center entrance by removing the queued mouse.",
      "instruction": "Attack the mouse on C5 with Pangur.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-attack",
          "actorId": "pangur",
          "targetId": "mouse-8"
        }
      ],
      "order": 47
    },
    {
      "id": "turn3-pangur-move-c5",
      "title": "Park on Center Entrance",
      "highlights": ["pangur", "C5"],
      "text": "Park Pangur on the center entrance to add meow for the next wave.",
      "instruction": "Move Pangur to the highlighted cell.",
      "showNext": false,
      "completeOn": [
        {
          "action": "cat-move",
          "actorId": "pangur",
          "to": "C5"
        }
      ],
      "order": 48
    },
    {
      "id": "incoming-scare-win",
      "order": 49,
      "title": "Full Deterrence",
      "highlights": ["incoming-lane"],
      "text": "Six meow on entrances scares the entire wave; no mice enter when meowge meets the wave size.",
      "instruction": "Advance through the incoming summary.",
      "showNext": false,
      "completeOn": [
        {
          "action": "end-cat-phase",
          "count": 3
        },
        {
          "action": "incoming-finish",
          "count": 3
        }
      ]
    },
    {
      "id": "win-condition",
      "order": 50,
      "title": "Win the Game",
      "highlights": ["button:Restart", "button:Quit"],
      "text": "Cats win when all resident mice are gone and the incoming queue is fully deterred. Keep entrances covered to seal the victory.",
      "instruction": "Replay this board without instructions, or Quit to menu.",
      "showNext": false
    }
  ]
}
